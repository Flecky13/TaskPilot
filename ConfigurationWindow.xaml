<Window x:Class="TaskPilot.ConfigurationWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="TaskPilot - Konfiguration"
        Height="600" Width="900"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize"
        Icon="/icons/toolicon.ico"
        Closing="Window_Closing">

    <Grid Background="#F5F5F5">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#2196F3" Padding="20">
            <StackPanel>
                <TextBlock Text="Programmüberwachung konfigurieren" FontSize="18" FontWeight="Bold" Foreground="White"/>
                <TextBlock Text="Bearbeiten Sie die überwachten Programme - Aktivieren Sie Auto-Restart und definieren Sie Startbefehle" FontSize="12" Foreground="#E3F2FD" Margin="0,5,0,0"/>
            </StackPanel>
        </Border>

        <!-- Filter -->
        <Border Grid.Row="1" Background="White" Padding="20" BorderBrush="#DDDDDD" BorderThickness="0,1,0,1">
            <StackPanel>
                <TextBlock Text="Prozesse filtern:" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <TextBox x:Name="FilterTextBox"
                         Text="{Binding FilterText, UpdateSourceTrigger=PropertyChanged}"
                         Padding="10,8"
                         Background="White"
                         BorderBrush="#CCCCCC"
                         BorderThickness="1"
                         Foreground="#333"
                         FontSize="12"/>
                <TextBlock Text="Tipp: Nutzen Sie * (beliebig viele Zeichen) oder ? (ein Zeichen) für Wildcard-Suche"
                           FontSize="10" Foreground="#666" Margin="0,5,0,0"/>
            </StackPanel>
        </Border>

        <!-- Prozessliste -->
        <DataGrid Grid.Row="2"
                  x:Name="ProcessesDataGrid"
                  ItemsSource="{Binding AvailableProcesses}"
                  AutoGenerateColumns="False"
                  GridLinesVisibility="Horizontal"
                  HeadersVisibility="Column"
                  SelectionMode="Single"
                  CanUserResizeRows="False"
                  CanUserSortColumns="False"
                  AlternatingRowBackground="#FAFAFA"
                  RowHeight="22"
                  Margin="20">

            <DataGrid.Columns>
                <DataGridCheckBoxColumn Header="Überwachen" Binding="{Binding IsSelected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="80" IsReadOnly="False"/>
                <DataGridTextColumn Header="Programmname" Binding="{Binding DisplayName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="*" IsReadOnly="False"/>
                <DataGridTextColumn Header="Prozessname" Binding="{Binding ProcessName}" Width="160" IsReadOnly="True"/>
                <DataGridTextColumn Header="Beschreibung" Binding="{Binding Description, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="200" IsReadOnly="False"/>
                <DataGridCheckBoxColumn Header="Auto-Restart" Binding="{Binding AutoRestart, Mode=TwoWay}" Width="100" IsReadOnly="False"/>
                <DataGridTextColumn Header="Startbefehl" Binding="{Binding StartCommand, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="220" IsReadOnly="False"/>
                <DataGridTemplateColumn Header="Aktion" Width="170">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <Button Content="Bearbeiten" Click="EditProcess_Click" Padding="8,5" Margin="0,0,5,0" Background="#2196F3" Foreground="White" FontSize="11" FontWeight="SemiBold"/>
                                <Button Content="Löschen" Click="DeleteProcess_Click" Padding="8,5" Background="#F44336" Foreground="White" FontSize="11" FontWeight="SemiBold"/>
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Footer mit Buttons -->
        <Border Grid.Row="3" Background="White" Padding="20" BorderBrush="#DDDDDD" BorderThickness="0,1,0,0">
            <StackPanel>
                <!-- Erste Zeile: Funktionsbuttons -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,0,10">
                    <Button Content="Neuer Prozess" Click="AddSingleProcess_Click" Padding="15,8" Background="#2196F3" Foreground="White" FontWeight="SemiBold" Margin="0,0,10,0"/>
                    <Button Content="Alle aktivieren" Click="SelectAll_Click" Padding="15,8" Background="#4CAF50" Foreground="White" FontWeight="SemiBold" Margin="0,0,10,0"/>
                    <Button Content="Hilfe" Click="ShowHelp_Click" Padding="15,8" Background="#FF9800" Foreground="White" FontWeight="SemiBold"/>
                </StackPanel>

                <!-- Zweite Zeile: Schließen und Übernehmen -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Schließen" Click="Cancel_Click" Padding="20,10" Margin="0,0,10,0" Background="#9E9E9E" Foreground="White" FontWeight="SemiBold" Width="120"/>
                    <Button Content="Übernehmen" Click="Apply_Click" Padding="20,10" Background="#4CAF50" Foreground="White" FontWeight="SemiBold" Width="120"/>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
</Window>
