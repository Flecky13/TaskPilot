<Window x:Class="TaskPilot.ConfigurationWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="TaskPilot - Konfiguration"
        Height="600" Width="900"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize"
        Icon="/icons/toolicon.ico"
        Closing="Window_Closing">

    <Grid Background="#F5F5F5">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#2196F3" Padding="20">
            <StackPanel>
                <TextBlock Text="ProgrammÃ¼berwachung konfigurieren" FontSize="18" FontWeight="Bold" Foreground="White"/>
                <TextBlock Text="Bearbeiten Sie die Ã¼berwachten Programme - Aktivieren Sie Auto-Restart und definieren Sie Startbefehle" FontSize="12" Foreground="#E3F2FD" Margin="0,5,0,0"/>
            </StackPanel>
        </Border>

        <!-- Filter -->
        <Border Grid.Row="1" Background="White" Padding="15,10" BorderBrush="#DDDDDD" BorderThickness="0,1,0,1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Filterbox -->
                <StackPanel Grid.Column="0">
                    <TextBlock Text="Prozesse filtern:" FontWeight="SemiBold" FontSize="11" Margin="0,0,0,3"/>
                    <TextBox x:Name="FilterTextBox"
                             Text="{Binding FilterText, UpdateSourceTrigger=PropertyChanged}"
                             Padding="8,5"
                             Background="White"
                             BorderBrush="#CCCCCC"
                             BorderThickness="1"
                             Foreground="#333"
                             FontSize="11"
                             Height="28"/>
                </StackPanel>

                <!-- Buttons in einer Zeile, links ausgerichtet -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Bottom" Margin="15,0,0,0">
                    <Button Content="Neuer Prozess" Click="AddSingleProcess_Click" Padding="12,6" Background="#2196F3" Foreground="White" FontWeight="SemiBold" FontSize="11" Margin="0,0,8,0"/>
                    <Button Content="Alle Ãœberwachen" Click="SetAllMonitored_Click" Padding="12,6" Background="#4CAF50" Foreground="White" FontWeight="SemiBold" FontSize="11" Margin="0,0,8,0"/>
                    <Button Content="Ãœberwachen aus" Click="ClearAllMonitored_Click" Padding="12,6" Background="#D32F2F" Foreground="White" FontWeight="SemiBold" FontSize="11" Margin="0,0,8,0"/>
                    <Button Content="Alle AutoStart" Click="SetAllAutostart_Click" Padding="12,6" Background="#FF5722" Foreground="White" FontWeight="SemiBold" FontSize="11" Margin="0,0,8,0"/>
                    <Button Content="AutoStart aus" Click="ClearAllAutostart_Click" Padding="12,6" Background="#E64A19" Foreground="White" FontWeight="SemiBold" FontSize="11" Margin="0,0,8,0"/>
                    <Button Content="Hilfe" Click="ShowHelp_Click" Padding="12,6" Background="#FF9800" Foreground="White" FontWeight="SemiBold" FontSize="11"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Prozessliste -->
        <DataGrid Grid.Row="2"
                  x:Name="ProcessesDataGrid"
                  ItemsSource="{Binding AvailableProcesses}"
                  AutoGenerateColumns="False"
                  GridLinesVisibility="Horizontal"
                  HeadersVisibility="Column"
                  SelectionMode="Single"
                  CanUserResizeRows="False"
                  CanUserSortColumns="False"
                  AlternatingRowBackground="#FAFAFA"
                  RowHeight="22"
                  Margin="20">

            <DataGrid.Columns>
                <DataGridCheckBoxColumn Header="Ãœberwachen" Binding="{Binding IsSelected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="80" IsReadOnly="False"/>
                <DataGridTextColumn Header="Programmname" Binding="{Binding DisplayName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="150" IsReadOnly="False"/>
                <DataGridTextColumn Header="Prozessname" Binding="{Binding ProcessName}" Width="120" IsReadOnly="True"/>
                <DataGridTextColumn Header="Beschreibung" Binding="{Binding Description, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="120" IsReadOnly="False"/>
                <DataGridCheckBoxColumn Header="Auto-Restart" Binding="{Binding AutoRestart, Mode=TwoWay}" Width="90" IsReadOnly="False"/>
                <DataGridTextColumn Header="Startbefehl" Binding="{Binding StartCommand, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="*" IsReadOnly="False"/>
                <DataGridTemplateColumn Header="Aktion" Width="60">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <!-- Bearbeiten Button mit Stift-Symbol -->
                                <Button Click="EditProcess_Click" Padding="4,2" Margin="0,0,4,0" Background="#2196F3" Foreground="White" FontSize="10" FontWeight="Bold" Width="20" Height="20" ToolTip="Bearbeiten">
                                    <TextBlock Text="âœŽ" TextAlignment="Center" VerticalAlignment="Center"/>
                                </Button>
                                <!-- LÃ¶schen Button mit MÃ¼lleimer-Symbol -->
                                <Button Click="DeleteProcess_Click" Padding="4,2" Background="#F44336" Foreground="White" FontSize="10" FontWeight="Bold" Width="20" Height="20" ToolTip="LÃ¶schen">
                                    <TextBlock Text="ðŸ—‘" TextAlignment="Center" VerticalAlignment="Center"/>
                                </Button>
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Footer mit Buttons -->
        <Border Grid.Row="3" Background="White" Padding="15,10" BorderBrush="#DDDDDD" BorderThickness="0,1,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Rechts ausgerichtete Buttons -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="SchlieÃŸen" Click="Cancel_Click" Padding="15,6" Margin="0,0,8,0" Background="#9E9E9E" Foreground="White" FontWeight="SemiBold" FontSize="11" Width="100"/>
                    <Button Content="Ãœbernehmen" Click="Apply_Click" Padding="15,6" Background="#4CAF50" Foreground="White" FontWeight="SemiBold" FontSize="11" Width="100"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
